{"ast":null,"code":"//定义烈度配色\nconst intColor = {\n  \"1\": {\n    \"bkcolor\": \"#9bc4e4\"\n  },\n  \"2\": {\n    \"bkcolor\": \"#00a0f1\"\n  },\n  \"3\": {\n    \"bkcolor\": \"#0062f5\"\n  },\n  \"4\": {\n    \"bkcolor\": \"#2de161\"\n  },\n  \"5\": {\n    \"bkcolor\": \"#1cac5d\"\n  },\n  \"6\": {\n    \"bkcolor\": \"#bdb93b\"\n  },\n  \"7\": {\n    \"bkcolor\": \"#ffba3d\"\n  },\n  \"8\": {\n    \"bkcolor\": \"#c38b2c\"\n  },\n  \"9\": {\n    \"bkcolor\": \"#c75622\"\n  },\n  \"10\": {\n    \"bkcolor\": \"#ff000d\"\n  },\n  \"11\": {\n    \"bkcolor\": \"#c20007\"\n  },\n  \"12\": {\n    \"bkcolor\": \"#fd2fc2\"\n  }\n};\nimport axios from 'axios';\nexport default {\n  name: 'ChineseEarthquakeList',\n  data() {\n    return {\n      mainType: null,\n      mainEpicenter: '载入中',\n      mainMagnitude: '0.0',\n      mainDepth: null,\n      mainTime: '01/01 00:00',\n      mainMaxInt: '-',\n      mainMaxIntColor: '#444',\n      subTime: ['01/01 00:00', '01/01 00:00', '01/01 00:00'],\n      subEpicenter: ['载入中', '载入中', '载入中'],\n      subMagnitude: ['0.0', '0.0', '0.0'],\n      subDepth: [],\n      subMaxInt: ['-', '-', '-'],\n      subMaxIntColor: ['#444', '#444', '#444'],\n      subBarList: []\n    };\n  },\n  methods: {\n    getMainData() {\n      axios.get('https://api.projectbs.cn/v2/ceic/get_data.json?' + new Date().getTime()).then(data => {\n        let json = data.data;\n        this.mainType = json.data.type;\n        this.mainDepth = json.data.depth;\n        this.mainEpicenter = json.data.epicenter;\n        let mainStartAt = json.data.occurTime;\n        this.mainMagnitude = json.data.magnitude;\n        //startAt 转换\n        mainStartAt = mainStartAt.replace(\"月\", \"/\");\n        mainStartAt = mainStartAt.replace(\"日\", \" \");\n        mainStartAt = mainStartAt.replace(\"时\", \":\");\n        this.mainTime = mainStartAt.replace(\"分\", \"\");\n        if (this.mainType == '正式') {\n          this.mainTime += ' 正式报';\n          this.mainMaxInt = this.calcMaxInt(this.mainMagnitude, this.mainDepth);\n          this.mainMaxIntColor = intColor[this.mainMaxInt].bkcolor;\n        }\n      });\n    },\n    genDOM() {\n      // this.subBarList[0] = null;\n      // this.subBarList[1] = null;\n      // this.subBarList[2] = null;\n      // for (let i = 3; i <= 50; i++) {\n      //     this.subBarList.push('<div id=subBar'+i+'><div id=subLeft'+i+'><div id=subTime'+i+'>{{subTime['+i+']}}</div><div id=subEpicenter'+i+'>{{subEpicenter['+i+']}}</div><div id=subMagnitude'+i+'>M{{subMagnitude['+i+']}}</div></div><div id=subMaxInt'+i+' :style=\"{\"background-color\":subMaxInt['+i+']}\">{{subMaxInt['+i+']}}</div></div>')\n      // }\n    },\n    calcMaxInt(calcMagnitude, calcDepth) {\n      let numa = calcMagnitude / 2.08 * 2.82;\n      let numb = calcDepth * -0.013;\n      let maxInt = Math.round(numa + numb);\n      if (maxInt > 12) maxInt = 12;\n      if (maxInt < 1) maxInt = 1;\n      return maxInt;\n    }\n  },\n  created: () => {\n    console.log(this);\n  }\n};","map":{"version":3,"mappings":"AAwBA;AACA;EAAA;IAAA;EAAA;EAAA;IAAA;EAAA;EAAA;IAAA;EAAA;EAAA;IAAA;EAAA;EAAA;IAAA;EAAA;EAAA;IAAA;EAAA;EAAA;IAAA;EAAA;EAAA;IAAA;EAAA;EAAA;IAAA;EAAA;EAAA;IAAA;EAAA;EAAA;IAAA;EAAA;EAAA;IAAA;EAAA;AAAA;AACA;AACA;EACAA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MAEAC;MACAC;MACAC;MACAC;MACAC;MACAC;MAEAC;IACA;EACA;EACAC;IACAC;MACAC;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACAC;QACAA;QACAA;QACA;QAEA;UACA;UACA;UACA;QACA;MACA;IACA;IACAC;MACA;MACA;MACA;MACA;MACA;MACA;IAAA,CACA;IACAC;MACA;MACA;MACA;MACA;MACA;MACA;IACA;EACA;EACAC;IACAC;EACA;AACA","names":["name","data","mainType","mainEpicenter","mainMagnitude","mainDepth","mainTime","mainMaxInt","mainMaxIntColor","subTime","subEpicenter","subMagnitude","subDepth","subMaxInt","subMaxIntColor","subBarList","methods","getMainData","axios","mainStartAt","genDOM","calcMaxInt","created","console"],"sourceRoot":"src/components","sources":["ChineseEarthquakeList.vue"],"sourcesContent":["<template>\n    <div>\n        <div id=\"mainBar\">\n\t\t\t<div id=\"mainLeft\">\n\t\t\t\t<div id=\"mainTime\">{{mainTime}}</div>\n\t\t\t\t<div id=\"mainEpicenter\">{{mainEpicenter}}</div>\n\t\t\t\t<div id=\"mainDepth\">{{mainDepth}}<font size=\"3\">&nbsp;km</font></div>\n\t\t\t\t<div id=\"mainMagnitude\"><font size=\"4\">M</font>{{mainMagnitude}}</div>\n\t\t\t</div>\n\t\t\t<div id=\"mainMaxInt\" :style=\"{'background-color':mainMaxIntColor}\">{{mainMaxInt}}</div>\n\t\t</div>\n\t\t<div id=\"subBar2\">\n\t\t\t<div id=\"subLeft2\">\n\t\t\t\t<div id=\"subTime2\">{{subTime[2]}}</div>\n\t\t\t\t<div id=\"subEpicenter2\">{{subEpicenter[2]}}</div>\n\t\t\t\t<div id=\"subMagnitude2\">M{{subMagnitude[2]}}</div>\n\t\t\t</div>\n\t\t\t<div id=\"subMaxInt2\" :style=\"{'background-color':subMaxInt[2]}\">{{subMaxInt[2]}}</div>\n\t\t</div>\n        {{genDOM()}}\n    </div>\n</template>\n\n<script>\n    //定义烈度配色\n    const intColor = {\"1\":{\"bkcolor\":\"#9bc4e4\"},\"2\":{\"bkcolor\":\"#00a0f1\"},\"3\":{\"bkcolor\":\"#0062f5\"},\"4\":{\"bkcolor\":\"#2de161\"},\"5\":{\"bkcolor\":\"#1cac5d\"},\"6\":{\"bkcolor\":\"#bdb93b\"},\"7\":{\"bkcolor\":\"#ffba3d\"},\"8\":{\"bkcolor\":\"#c38b2c\"},\"9\":{\"bkcolor\":\"#c75622\"},\"10\":{\"bkcolor\":\"#ff000d\"},\"11\":{\"bkcolor\":\"#c20007\"},\"12\":{\"bkcolor\":\"#fd2fc2\"}};\n    import axios from 'axios';\n    export default {\n        name: 'ChineseEarthquakeList',\n        data(){\n            return{\n                mainType: null,\n                mainEpicenter: '载入中',\n                mainMagnitude: '0.0',\n                mainDepth: null,\n                mainTime: '01/01 00:00',\n                mainMaxInt: '-',\n                mainMaxIntColor: '#444',\n\n                subTime: ['01/01 00:00','01/01 00:00','01/01 00:00'],\n                subEpicenter: ['载入中','载入中','载入中'],\n                subMagnitude: ['0.0','0.0','0.0'],\n                subDepth: [],\n                subMaxInt: ['-','-','-'],\n                subMaxIntColor: ['#444','#444','#444'],\n\n                subBarList: []\n            }\n        },\n        methods:{\n            getMainData(){\n                axios.get('https://api.projectbs.cn/v2/ceic/get_data.json?' + new Date().getTime()).then(data => {\n                    let json = data.data;\n                    this.mainType = json.data.type;\n                    this.mainDepth = json.data.depth;\n                    this.mainEpicenter = json.data.epicenter;\n                    let mainStartAt = json.data.occurTime;\n                    this.mainMagnitude = json.data.magnitude;\n                    //startAt 转换\n                    mainStartAt = mainStartAt.replace(\"月\", \"/\");\n                    mainStartAt = mainStartAt.replace(\"日\", \" \");\n                    mainStartAt = mainStartAt.replace(\"时\", \":\");\n                    this.mainTime = mainStartAt.replace(\"分\", \"\");\n\n                    if (this.mainType == '正式') {\n                        this.mainTime += ' 正式报';\n                        this.mainMaxInt = this.calcMaxInt(this.mainMagnitude, this.mainDepth);\n                        this.mainMaxIntColor = intColor[this.mainMaxInt].bkcolor;\n                    }\n                });\n            },\n            genDOM(){\n                // this.subBarList[0] = null;\n                // this.subBarList[1] = null;\n                // this.subBarList[2] = null;\n                // for (let i = 3; i <= 50; i++) {\n                //     this.subBarList.push('<div id=subBar'+i+'><div id=subLeft'+i+'><div id=subTime'+i+'>{{subTime['+i+']}}</div><div id=subEpicenter'+i+'>{{subEpicenter['+i+']}}</div><div id=subMagnitude'+i+'>M{{subMagnitude['+i+']}}</div></div><div id=subMaxInt'+i+' :style=\"{\"background-color\":subMaxInt['+i+']}\">{{subMaxInt['+i+']}}</div></div>')\n                // }\n            },\n            calcMaxInt(calcMagnitude, calcDepth) {\n                let numa = (calcMagnitude) / 2.08 * 2.82;\n                let numb = (calcDepth) * -0.013;\n                let maxInt = Math.round(numa + numb);\n                if (maxInt > 12) maxInt = 12;\n                if (maxInt < 1) maxInt = 1;\n                return (maxInt);\n            }\n        },\n        created:() => {\n            console.log(this);\n        }\n    }\n</script>\n\n<style>\n    @font-face {\n        font-family:'oppoSans-H';\n        src:url('../assets/font/OPPOSans-H.ttf') format('truetype');\n    }\n    @font-face {\n        font-family:'oppoSans-B';\n        src:url('../assets/font/OPPOSans-B.ttf') format('truetype');\n    }\n    * {\n        font-family:oppoSans-B,sans-serif;\n        padding:0;\n        margin:0;\n    }\n    body {\n        font-family:oppoSans-B,sans-serif;\n        margin:0 auto;\n        background-color:#242424;\n    }\n    #mainBar {\n\tposition:relative;\n\ttop:0px;\n\tleft:0px;\n\theight:98px;\n\twidth:350px;\n\tcolor:white;\n    }\n    #mainLeft {\n        position:absolute;\n        top:0px;\n        left:0px;\n        height:98px;\n        width:248px;\n        background-color:#333333;\n        border-radius:10px;\n    }\n    #mainMaxInt {\n        position:absolute;\n        height:98px;\n        width:98px;\n        right:0px;\n        background-color:#444444;\n        border-radius:10px;\n        line-height:98px;\n        font-size:64px;\n        font-family:OPPOSans-H;\n        text-align:center;\n        text-shadow:0px 4px 10px rgba(0,0,0,0.3);\n        border: 3px solid white;\n        box-sizing:border-box;\n    }\n    #mainTime {\n        position:relative;\n        top:2px;\n        left:4px;\n        font-size:16px;\n    }\n    #mainEpicenter {\n        position:relative;\n        top:2px;\n        left:4px;\n        font-size:20px;\n        line-height:22px;\n        width:237px;\n    }\n    #mainDepth {\n        position:absolute;\n        bottom:0px;\n        left:4px;\n        font-size:25px;\n    }\n    #mainMagnitude {\n        position:absolute;\n        bottom:0px;\n        right:4px;\n        font-size:25px;\n    }\n    [id^=\"subBar\"] {\n        position:relative;\n        left:0px;\n        height:48px;\n        width:350px;\n        color:white;\n        margin-top:4px;\n    }\n    [id^=\"subLeft\"] {\n        position:absolute;\n        top:0px;\n        left:0px;\n        height:48px;\n        width:298px;\n        background-color:#333333;\n        border-radius:10px;\n    }\n    [id^=\"subMaxInt\"] {\n        position:absolute;\n        right:0px;\n        top:0px;\n        height:48px;\n        width:48px;\n        background-color:#444444;\n        border-radius:10px;\n        line-height:48px;\n        font-size:30px;\n        font-family:OPPOSans;\n        text-align:center;\n        text-shadow:0px 4px 10px rgba(0,0,0,0.3);\n        border: 2px solid white;\n        box-sizing:border-box;\n    }\n    [id^=\"subTime\"] {\n        position:relative;\n        top:2px;\n        left:4px;\n        font-size:15px;\n    }\n    [id^=\"subEpicenter\"] {\n        position:relative;\n        top:2px;\n        left:4px;\n        font-size:20px;\n    }\n    [id^=\"subMagnitude\"] {\n        position:absolute;\n        right:4px;\n        font-size:21px;\n        line-height:48px;\n        top:0px;\n    }\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}